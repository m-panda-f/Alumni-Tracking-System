<!DOCTYPE html>
<html>
<head>
<meta charset="utf-8">
<title>Form-v10 by Colorlib</title>

<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">

<!-- <link rel="stylesheet" type="text/css" href="css/montserrat-font.css"> -->
<!-- <link rel="stylesheet" type="text/css" href="fonts/material-design-iconic-font/css/material-design-iconic-font.min.css"> -->
<link rel="stylesheet" href="css/index.css">
<link rel="stylesheet" href="css/ex.css" />
<body class="form-v10">
    <nav>
        <ul>
       <li>
        <a href="index.html">Home</a>
      </li>
      <li>
        <a href="login.html">Login</a>
      </li>
    </ul>
    </nav>
    <div class="page-content">
        <div class="form-v10-content">
            <form class="form-detail" id="myform">
                <div class="form-left">
                    <h2>General Information</h2>
                    <div class="form-row">
                        <input type="text" name="user_id" id="user_id" class="input-text" placeholder="User ID" required>
                    </div>
                        <div class="form-group">
                            <div class="form-row form-row-1">
                                <input type="text" name="first_name" id="first_name" class="input-text" placeholder="First Name" required>
                           </div>
                            <div class="form-row form-row-2">
                                <input type="text" name="last_name" id="last_name" class="input-text" placeholder="Last Name" required>
                            </div>
                        </div>
                        <div class="form-row">
                            <input type="date" name="dob" class="dob" id="dob" placeholder="Date of Birth (DD/MM/YYYY)" required>
                         </div>
                        <div class="form-group"> 
                            <div class="form-row form-row-1">
                                <input type="text" name="father" id="father" class="input-text" placeholder="Father Name" required>
                           </div>
                            <div class="form-row form-row-2">
                                <input type="text" name="mother" id="mother" class="input-text" placeholder="Mother Name" required>
                            </div>
                        </div>
                        <div class="form-group">
                            <div class="form-row form-row-1">
                                <input type="text" name="phone" class="phone" id="phone" placeholder="Phone Number" required>
                            </div>
                            <div class="form-row form-row-2">
                                <input type="email"  id="email" class="email"placeholder="Email">
                            </div>
                        </div>
                       
                        <div class="form-row">
                           <input type="text" name="instid" class="instid" id="instid" placeholder="Institute" required>
                        </div>
                        <div class="form-row">
                            <input type="text" name="address" class="address" id="address" placeholder="Address" required>
                         </div>
                </div>
                <div class="form-right">
                    <h2>Contact Details</h2>
                    <div class="form-group">
                        <div class="form-row form-row-1">
                           <input type="text" name="usn" class="usn" id="usn" placeholder="USN" required>
                        </div>
                        <div class="form-row form-row-2">
                            <input type="text" name="grad" class="grad" id="grad" placeholder="Graduation Date (DD/MM/YYYY)" required>
                         </div>
                    </div>
                    <div class="form-group">
                        <div class="form-row form-row-1">
                            <input type="text" name="tc" class="tc" id="tc" placeholder="Received TC" required>
                        </div>
                        <div class="form-row form-row-2">
                            <select name="mode" id="mode" aria-placeholder="Admission Mode">
                                <option value="none" selected>Admission Mode</option>
                                <option value="Management">Management</option>
                                <option value="KEA">KEA(Government seat)</option>
                                <option value="Comed-K">Comed-K</option>
                            </select>
                        </div>  
                    </div>
                    <div class="form-row">
                        <input type="text" name="admd" class="admd" id="admd" placeholder="Admission Date (DD/MM/YYYY)" required>
                    </div>
                    <div class="form-group">
                        <div class="form-row form-row-3">
                            <input type="text" name="Course" class="Course" id="Course" placeholder="Course" required>
                        </div>
                    </div>
                    
                    <div class="form-checkbox">
                        <label class="container">
                            <p>I do accept the <a href="#" class="text">Terms and Conditions</a> of your site.</p>
                            <input type="checkbox" name="checkbox">
                            <span class="checkmark"></span>
                        </label>
                    </div>
                <div class="form-row-last">
                    <button type="submit">Submit</button>
                </div>
            </form>
        </div>
    </div>
    <script>
        document.addEventListener('DOMContentLoaded', () => {
            const alumniloginForm = document.getElementById('myform');
            alumniloginForm.addEventListener('submit', (event) => {
                event.preventDefault();
                const formData = new FormData(alumniloginForm);
                const userd = {};
                formData.forEach((value, key) => {
                    userd[key] = value;
                });
                submitForm(userd);
            });

            function submitForm(user) {
                fetch('/submitForm', {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json',
                    },
                    body: JSON.stringify(user), // Use 'user' instead of 'formData'
                })
                .then(response => response.text())
                .then(data => {
                    if (data.message === 'Record inserted successfully') {
                        alert('Record inserted successfully');
                        window.location.href = `/alumnidash.html`;
                      }
                      window.location.href = `/alumnidash.html`;
                }
                )
                .catch(error => {
                    console.error('Error:', error);
                });
            }
        });
    </script>
</body>
</html>